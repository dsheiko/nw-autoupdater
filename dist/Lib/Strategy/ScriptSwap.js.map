{"version":3,"sources":["../../../Lib/Strategy/ScriptSwap.js"],"names":["extraArgs","updateDir","logPath","options","swap","swapFactory","args","getArgs","concat","extractScript","launch","getRunner","nw","App","quit","restartToSwap","join","require","exports"],"mappings":";;AAIE;;;;;+BAIA,WAA6BA,YAAY,EAAzC,EAA4C;AAC1C,UAAM,EAAEC,SAAF,EAAaC,OAAb,KAAyB,KAAKC,OAApC;AAAA,UACMC,OAAOC,YAAa,KAAKF,OAAlB,CADb;AAAA,UAEMG,OAAOF,KAAKG,OAAL,GAAeC,MAAf,CAAuBR,SAAvB,CAFb;;AAIAI,SAAKK,aAAL,CAAoBR,SAApB;AACA,UAAMS,OAAQN,KAAKO,SAAL,EAAR,EAA0BL,IAA1B,EAAgCL,SAAhC,EAA2CC,OAA3C,CAAN;AACAU,OAAGC,GAAH,CAAOC,IAAP;AACD,G;;kBARcC,a;;;;;;;AARjB,MAAM,EAAEC,IAAF,KAAYC,QAAS,MAAT,CAAlB;AAAA,MACM,EAAEP,MAAF,KAAaO,QAAS,UAAT,CADnB;AAAA,MAEM,EAAEZ,WAAF,KAAkBY,QAAS,QAAT,CAFxB;;AAmBAC,QAAQH,aAAR,GAAwBA,aAAxB","file":"ScriptSwap.js","sourcesContent":["const { join  } = require( \"path\" ),\r\n      { launch } = require( \"../utils\" ),\r\n      { swapFactory } = require( \"../env\" );\r\n\r\n  /**\r\n   * Restart and launch detached swap\r\n   * @returns {Promise}\r\n   */\r\n  async function restartToSwap(extraArgs = []){\r\n    const { updateDir, logPath } = this.options,\r\n          swap = swapFactory( this.options ),\r\n          args = swap.getArgs().concat( extraArgs );\r\n\r\n    swap.extractScript( updateDir );\r\n    await launch( swap.getRunner(), args, updateDir, logPath );\r\n    nw.App.quit();\r\n  }\r\n\r\n\r\nexports.restartToSwap = restartToSwap;\r\n"]}