{"version":3,"sources":["../../../Lib/Swap/Win.js"],"names":["join","require","fs","SwapAbstract","SwapWin","constructor","options","getScriptContent","extractScript","homeDir","content","scriptPath","writeFileSync","getArgs","execDir","updateDir","executable","backupDir","logDir","module","exports"],"mappings":"AAAA,MAAM,EAAEA,IAAF,KAAYC,QAAS,MAAT,CAAlB;AAAA,MACMC,KAAKD,QAAS,IAAT,CADX;AAAA,MAEME,eAAeF,QAAS,YAAT,CAFrB;;AAIA,MAAMG,OAAN,SAAsBD,YAAtB,CAAkC;;AAEhCE,cAAaC,OAAb,EAAsB;AACpB,UAAOA,OAAP;AACD;AACD;AACAC,qBAAkB;AAChB,WAAQ;;;;;;;;;;;;CAAR;AAaD;;AAEDC,gBAAeC,OAAf,EACA;AACE,UAAMC,UAAU,KAAKH,gBAAL,EAAhB;AAAA,UACMI,aAAaX,KAAMS,OAAN,EAAe,UAAf,CADnB;AAEAP,OAAGU,aAAH,CAAkBD,UAAlB,EAA8BD,OAA9B,EAAuC,MAAvC;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACD;;AAED;;;;AAIAE,YACA;AACI,UAAM,EAAEC,OAAF,EAAWC,SAAX,EAAsBC,UAAtB,EAAkCC,SAAlC,EAA6CC,MAA7C,KAAwD,KAAKZ,OAAnE;AACA,WAAO,CAAEQ,OAAF,EAAWC,SAAX,EAAsBE,SAAtB,EAAiCD,UAAjC,EAA8C,OAA9C,CAAP;AACH;;AAtC+B;;AA0ClCG,OAAOC,OAAP,GAAiBhB,OAAjB","file":"Win.js","sourcesContent":["const { join  } = require( \"path\" ),\r\n      fs = require( \"fs\" ),\r\n      SwapAbstract = require( \"./Abstract\" );\r\n\r\nclass SwapWin extends SwapAbstract{\r\n\r\n  constructor( options ){\r\n    super( options );\r\n  }\r\n  // @see http://steve-jansen.github.io/guides/windows-batch-scripting/part-2-variables.html\r\n  getScriptContent(){\r\n    return `@echo off\r\nSET execDir=%~1\r\nSET updateDir=%~2\r\nSET backupDir=%~3\r\nSET runner=%~4\r\nSET verbose=%~5\r\n\r\nrmdir \"%backupDir%\" /s /q\r\nxcopy \"%execDir%\" \"%backupDir%\" /e /i /h /c /y\r\nxcopy \"%updateDir%\" \"%execDir%\" /e /i /h /c /y\r\n\r\n\"%execDir%\\\\%runner%\"\r\n`;\r\n  }\r\n\r\n  extractScript( homeDir )\r\n  {\r\n    const content = this.getScriptContent(),\r\n          scriptPath = join( homeDir, \"swap.bat\" );\r\n    fs.writeFileSync( scriptPath, content, \"utf8\" );\r\n    this.scriptPath = scriptPath;\r\n  }\r\n\r\n  /**\r\n   * Get args for swap script\r\n   * @returns {Array}\r\n   */\r\n  getArgs()\r\n  {\r\n      const { execDir, updateDir, executable, backupDir, logDir } = this.options;\r\n      return [ execDir, updateDir, backupDir, executable, `false` ];\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = SwapWin;\r\n"]}